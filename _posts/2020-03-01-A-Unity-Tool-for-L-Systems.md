---
layout: post
title: "[WIP] A unity tool for L-Systems"
date: 2020-03-01
comments: false
---

#### Disclaimer 

This post will assume you already know the basics of L-Systems. If you don't I invit you to read [my first post](https://blackbird806.github.io/LittleBirdBlog/2020/02/A-short-introduction-to-L-Systems) on that subject.


# Introduction

Some weeks ago for school project I had to do some researches on the subject of my choice and I finished to examinate more in detail L-Systems.
This is a presentation of this work.
There were two distinct parts in this work, the research and the developement. The research part was learning and exploring how L-Systems works and how we can use them for various tasks.
And the developement part was implement an Unity plugin that can generate meshes thanks to L-Systems.

# Making a simple L-System

When I started this project I already known a little about L-Systems so, in this project the first step was implementing a basic L-System in unity (I already worked on a prototype before that using Dlang and SDL but since I was using unity I had to reimplement it in C#).

So I started with the initial system, a list of productions rules and an interpreter that draw gizmos with the path generated by the system.

So my first instructions were:

_F_ : forward _n_ following the current direction    
_f_ : forward _n_ following the current direction without drawing lines  
_[_ : save current state  
_]_ : restore last saved state  
_+_ : rotate _k_ degree aroud y axis  
_-_ : rotate _-k_ degree aroud y axis  
_^_ : rotate _k_ degree aroud x axis  
_&_ : rotate _-k_ degree aroud x axis  
_/_ : rotate _k_ degree aroud z axis  
_\\_ : rotate _-k_ degree aroud z axis  
_|_ : rotate 180 degree aroud y axis  

so after implementing that I was able to draw some things like this :

![3D LSystem](images/simple3DLSystem.PNG)

# Stochastic L-Systems

In _The algorithmic beauty of plants_ Aristid Lindenmayer and Przemslaw Prusinkiewicz described a way to create non deterministic L-Systems by adding multiples possibles productions to an Axiom with each production a percentage of chance to occur.
With this technique we can easly add some randomness to our generated figures and remove determinism.

# Context Sensitive L-Systems

In _The algorithmic beauty of plants_ context sensitive are described as a production rule that occur only if a context condition is met.
For exmaple consider the following system: 

_Ï‰ = AFF_  
_p1: A < F -> FX_  
_n = 0 : AFF_  
_n = 1 : AFXF_

Here only the production rule _p1_ precise that _F_ must be replaced only if an _A_ is on the left of _F_ in the last production so in this case only the first _F_ meet this condition so only the first _F_ will be replaced by it's production.  
On top of that rules can also describe a list of axiom that are ignored when checking for the context conditions.

# Parametric L-Systems

Here is the hard (to implement) part, a parametric L-System associate parameters with axioms.
So a production rule in a parametric L-System looks like that:

_A(t) -> B(t+1)CD(t, t-2)_   

Where _t_ is the parameter of the axiom _A_.
Then parameters can be used by the interpreter in order to have more freedom when writing a L-System.
So let's describe the new parameters of the interpreters:

_F(x)_ : forward _x_ following the current direction  
_^(x)_ : rotate _x_ degree aroud _x_ axis  
... and so on with other instructions axioms.  
So the big difference here is that all rotation and forward instructions may not all have the same length / angle, this allow us to generate new things impossible (or very hard) to do with the older system.

# Going further

In this small project I only implemented / studied a small part of L-Systems, there is a lot more to discover and to do.
Yet we didn't see nodes and edges rewritting, environment influence, inflorescence, ...  
If you want to learn more about L-Systems, I highly recommend _The algorithmic beauty of plants_ by Aristid Lindenmayer and Przemslaw Prusinkiewicz, this is the best and most complete reference about L-Systems.
I also recommend the research paper [_Evolving Lindenmayer systems in a competitive environment_](https://jobtalle.com/posts/2019_8_1/EvolvingLSystems.pdf) by Job J.V. Talle, which is an intersting work on top of _The algorithmic beauty of plants_.