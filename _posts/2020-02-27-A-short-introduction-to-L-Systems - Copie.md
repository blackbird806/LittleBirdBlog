---
layout: post
title: "[WIP] A unity tool for L-Systems"
date: 2020-02-27
comments: false
---

# Introduction

Some weeks ago for school project I had to do some researches on the subject of my choice and I finished to examinate more in detail L-Systems.
This is a presentation of this ~2 weeks work.
There were two distinct parts in this work, the research and the developement. The research part was learning and exploring how L-Systems works and how we can use them for various tasks.
And the developement part was implement an Unity plugin that can generate meshes thanks to L-Systems.

# Step 1: making a simple L-System

When starting this project I already had some knowledge about L-Systems so, in this project the first step was reimplenting it into unity.

So I started with the initial system, a list of productions rules and an interpreter that draw gizmos with the path generated by the system.

So my first instructions were:

_F_ : forward n following the current direction    
_f_ : forward n following the current direction without drawing lines  
_[_ : save current state  
_]_ : restore last saved state  
_+_ : rotate k degree aroud y axis  
_-_ : rotate -k degree aroud y axis  
_^_ : rotate k degree aroud x axis  
_&_ : rotate -k degree aroud x axis  
_/_ : rotate k degree aroud z axis  
_\\_ : rotate -k degree aroud z axis  
_|_ : rotate 180 degree aroud y axis  

so after implementing that I was able to draw some things like this :

__TODO PICTURES__

# Step 2: Stochastic L-Systems

In _The algorithmic beauty of plants_ Aristid Lindenmayer and Przemslaw Prusinkiewicz described a way to create non deterministic L-Systems by adding multiples possibles productions to an Axiom with each production a percentage of chance to occur.
With this technique we can easly add some randomness to our generated figures and remove determinism.

# Step 3: Context Sensitive L-Systems

In _The algorithmic beauty of plants_ context sensitive are described as a production rule that occur only if a context condition is met.
For exmaple consider the following system: 

w = AFF  
p1: A < F -> FX  
n = 0 : AFF  
n = 1 : AFXF

Here only the production rule _p1_ precise that _F_ must be replaced only if an _A_ is on the left of _F_ in the last production so in this case only the first _F_ meet this condition so only the first _F_ will be replaced by it's production.  
On top of that rules can also describe a list of axiom that are ignored when checking for the context conditions.

# Step 4: Parametric L-Systems

Here is the hard part, a parametric L-System associate parameters with axioms.
So a production rule in a parametric L-System looks like that:

A(t) -> B(t+1)CD(t, t-2)   

Where _t_ is the parameter of the axiom _A_.
Then parameters can be used by the interpreter in order to have more freedom when writing a L-System.
So let's describe the new parameters of the interpreters:

_F_(x) : forward x following the current direction  
_^_(x) : rotate x degree aroud x axis  
... and so on with other instructions axioms.  
So the big difference here is that all rotation and forward instructions may not all have the same length / angle, this allow us to generate new things impossible (or very hard) to do with the older system.